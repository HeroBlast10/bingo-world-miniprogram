<!--pages/me/me.wxml-->
<view class="container">
  <!-- 用户信息区域 -->
  <view class="user-section">
    <!-- 未登录状态 -->
    <view wx:if="{{!hasUserInfo}}" class="login-section">
      <view class="user-avatar-container">
        <image class="user-avatar" src="{{defaultAvatarUrl}}" mode="aspectFill" />
      </view>
      <view class="login-info">
        <text class="login-title">欢迎来到宾了个果</text>
        <text class="login-desc">登录后可保存您的游戏记录</text>
        <button class="login-btn" bindtap="login">微信授权登录</button>
      </view>
    </view>

    <!-- 已登录状态 -->
    <view wx:else class="user-info-section">
      <view class="user-avatar-container">
        <image class="user-avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill" />
        <view class="online-indicator"></view>
      </view>
      <view class="user-info">
        <view class="user-name-row">
          <text class="user-name">{{userInfo.nickName}}</text>
          <text class="edit-icon">✏️</text>
        </view>
        <text class="user-desc">宾果世界探索者</text>
      </view>
    </view>
  </view>

  <!-- 统计数据 - 只在已登录状态下显示 -->
  <view wx:if="{{hasUserInfo}}" class="stats-section">
    <view class="stats-item">
      <text class="stats-number">{{stats.completed}}</text>
      <text class="stats-label">已完成</text>
    </view>
    <view class="stats-item">
      <text class="stats-number">{{stats.created}}</text>
      <text class="stats-label">已创建</text>
    </view>
    <view class="stats-item">
      <text class="stats-number">{{stats.saved}}</text>
      <text class="stats-label">已保存</text>
    </view>
  </view>

  <!-- 功能菜单 -->
  <view class="menu-section">
    <view
      class="menu-item"
      wx:for="{{menuItems}}"
      wx:key="id"
      data-item="{{item}}"
      bindtap="onMenuTap"
    >
      <view class="menu-icon {{item.iconColor}}">
        <text class="menu-icon-text">{{item.icon}}</text>
      </view>
      <text class="menu-title">{{item.title}}</text>
      <view class="menu-arrow">
        <text class="arrow-text">›</text>
      </view>
    </view>
  </view>

  <!-- 版本信息 -->
  <view class="version-section">
    <text class="version-text">宾了个果 v1.0.1</text>
  </view>
</view>